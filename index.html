<html>
<head>
<meta charset="utf-8">
<title>Texopic typesetting language</title>
<style>
body { max-width: 75ex }
pre { border: 1px solid #cfcfcf; padding: 1em 4ex }
h2       > .ref { visibility: hidden; text-decoration: underline; }
h2:hover > .ref { visibility: visible !important }
h3       > .ref { visibility: hidden; text-decoration: underline; }
h3:hover > .ref { visibility: visible !important }
</style>
</head>
<body>
<h1>
Texopic typesetting language
</h1><p>
Texopic is a typesetting language for civilized, and less
civilized ages. It is easy to learn and easy to use.
</p><pre>#title Your story here

Opening paragraph.

#href {https://example.org/}
{Example link}</pre><p>
The core principle in Texopic is to stay on the back when
the author concentrates on writing her content.
</p><p>
Texopic uses only one meta-character (#) to form macros.
This makes it likely to avoid triggering a document
processor when writing your plaintext.
</p><p>
To make it even harder to trigger a macro by accident, the
macro character and word must be separated from the
plaintext by either semicolons or space. The surrounding
semicolon characters around a macro word are consumed.
</p><pre>Hello#world</pre><p>
Would print out as 'Hello#world', whereas.
</p><pre>Hello;#world</pre><p>
Would trigger a macro #world right after the 'Hello'.
If you actually wanted to type 'Hello #world' instead, you
could add semicolon after the meta-character to prevent it
from forming a macro.
</p><pre>Hello #;world</pre><p>
It should be extremely unlikely occurrence that a Texopic
processor recognizes a macro from something you write or
paste into your document.
</p><p>
Every Texopic processor recognize the same macros and the
same structure. Users can define new macro words to extend
what they can do with the language.
</p><p>
Texopic processor can be extended by writing new, custom
processors with a scripting language such as 
<a href="https://python.org/">Python</a>.
</p><h2 id="1">
1. Specification <a class="ref" href="#1">$</a>
</h2><p>
Overall, this document here should describe the Texopic
format in whole.
</p><p>
If the tool doesn't behave according to this document, the
tool contains a bug.
</p><h2 id="tools">
2. Tools <a class="ref" href="#tools">$</a>
</h2><p>
<a href="https://github.com/cheery/texopic">Utility library for python</a>
<a href="https://github.com/cheery/texopic/archive/master.zip">(Download)</a>
</p><h3 id="2.1">
2.1. Notes for utility library <a class="ref" href="#2.1">$</a>
</h3><p>
The library contains a module and scripts to generate html
from Texopic format. That generator has been written in such
way that lets you build your own document processor from the
pieces.
</p><p>
The html generator doesn't escape HTML properly. That needs
to be fixed later on.
</p><p>
The repository for the utility library contains also the
most up-to-date version of this document.
</p><h2 id="3">
3. Character escapes <a class="ref" href="#3">$</a>
</h2><p>
Texopic processors are expected to accept UTF-8 text. But
they can also recognize two forms of character escapes:
#XX and #U+XXXX. You can use both of these formats to
represent unicode characters that mess up in the editor.
</p><h2 id="4">
4. Macro block ## <a class="ref" href="#4">$</a>
</h2><p>
Sometimes it is desirable to not let Texopic format your
text. For example when writing short code snippets, or
something that should go through a specialized processor
that doesn't obey Texopic rules.
</p><p>
For this purpose there is a ## macro. When ## appears
on the end of a line, it will consume the subsequent lines
that are indented higher than the line where the ## macro
appeared.
</p><pre>#code python ##
    print("hello world")</pre><p>
This feature may make Texopic pain-in-the-ass to syntax
color. But then it enables you to write a real, backwards
compatible WYSIWYG text processor around this format.
</p><p>
The semicolon after a ## macro prevents it from having an
effect at the end of a line.
</p><h2 id="5">
5. Segment breaking <a class="ref" href="#5">$</a>
</h2><p>
Blank lines in Texopic text breaks the text into segments.
Also, the ## macro always ends a segment.
</p><p>
Macros can be used to label a segment to give them a special
meaning. #title, #section and #subsection have precisely
that behavior.
</p><h2 id="6">
6. Macro grouping <a class="ref" href="#6">$</a>
</h2><p>
The { and } characters are used to group in Texopic. They
prevent newlines from breaking the segment.
</p><p>
} and { characters can be used in the stream without worries
as long as they pair properly inside the macro groups. They
only have meaning when they come after a macro.
</p><p>
Whenever a macro is followed by one or more groups, those
groups are fused into the macro as arguments.
</p><p>
Blank lines or characters between a macro and a group
prevent the macro from collecting the group.
</p><p>
Here are several examples of groups that do not fuse with a
macro:
</p><pre>#href;{does not fuse}

#url

{does not fuse}</pre><p>
These groups fuse with macros preceding them:
</p><pre>#href{//example.org}{example}

#href {//example.org} {example}

#href
{//example.org}
{example}</pre><h2 id="7">
7. Macro resolution <a class="ref" href="#7">$</a>
</h2><p>
To understand how Texopic works through the document. It is
accurate to think of it as a chain of functions.
</p><p>
The first function transforms plaintext input into sequence
of characters and macro words. Lines consumed by ## token
are annotated into that token. The newlines followed by
blanks and macros followed by ';' are marked.
</p><p>
The second function forms segments from a sequence produced
by the first function. The groups and macros are formed and
no further parsing is needed after that point.
</p><p>
At this point the control is up to the user. She can choose
which kind of output she wants. She can completely customize
how the macros are interpreted by adjusting the output
processors.
</p><h2 id="8">
8. Recognized macros <a class="ref" href="#8">$</a>
</h2><p>
This is a quick summary of what is recognized by the
<a href="https://github.com/cheery/texopic">Texopic html processor</a>.
</p><pre>#title
##
#url{domain}
#href{domain}{description}
#section
#subsection</pre><p>
The macros try to follow conventions present in LaTeX.
</p><h2 id="9">
9. URL handling <a class="ref" href="#9">$</a>
</h2><p>
URLs in Texopic should be prefixed with #url macro word.
The automatic recognition of URLs is impractical
to solve in such way that it covers any and every valid URL
you could pass into the text.
</p><h2 id="10">
10. History <a class="ref" href="#10">$</a>
</h2><p>
Texopic started out during an 
<a href="//github.com/cheery/lever/blob/master/documentation_considerations.tex">assessment</a> of TeX for documentation in
<a href="//leverlanguage.com">Lever</a>.
</p><p>
For Lever I wanted reference documentation to be
written outside of the source files. The code would be
annotated to refer on the reference, rather than the other
way around.
</p><p>
Lever documentation flows upwards from the source code. This
means that aside from reference, there is internal documentation
that is sectioned by source files. That internal
documentation is currently in text files, which felt very
natural to write. I plan to section internal documentation
into chapters that still are sectioned by source files. This
internal documentation forms the basis for higher layers of
documentation.
</p><p>
I prefer that the references, guides and all the other
material would be available on the website as well as in the
runtime. To do this I need a format that a documentation
system in runtime could layout directly, and that could be
translated into highly linked, high quality HTML files.
</p><p>
Many of the files designed for this purpose was unclear and
it was hard to figure out what kind of notation they use.
They appeared to be also difficult to customize.
</p><p>
With Texopic I can completely customize my documentation
generation.
</p><h2 id="11">
11. Trivia <a class="ref" href="#11">$</a>
</h2><p>
While inspired by TeX, Texopic is neither TeX nor a
superset of TeX.
</p><p>
Texopic name born as a wordplay from "TeX by Topic". Author
thinks it sounds a bit like Aztec.
</p><p>
A small python script, texopic.py
was the first instance of a readable typesetting format that
could be used to documentation that matches to high standards.
Later on, it became the
<a href="//github.com/cheery/texopic/blob/master/texopic2html.py">texopic2html.py</a>
</p><p>
This file has been generated from <a href="sample.text">sample.text</a> with the
following linux command:
</p><pre>python texopic2html.py sample.text > index.html</pre><h2 id="license">
12. License <a class="ref" href="#license">$</a>
</h2><p>
MIT License
</p><p>
Copyright (c) 2016 Henri Tuhola
</p><p>
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
</p><p>
The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.
</p><p>
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
</p>
</body>
</html>
